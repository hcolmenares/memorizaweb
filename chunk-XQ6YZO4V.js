import{c as R}from"./chunk-CUWF4OKU.js";import{a as T}from"./chunk-XPUMUZJN.js";import{A as s,B as m,C as p,F as j,G as _,H as N,I as G,N as A,O as h,R as q,f as P,g as f,i as u,j as g,k as y,l as b,m as z,n as c,o as S,p as l,q as w,r as I,s as O,t as x,u as v,v as M,w as a,x as i,y as k,z as C}from"./chunk-3FATA2AS.js";function Y(r,n){if(r&1){let e=C();a(0,"button",9),s("click",function(){u(e);let o=m().$index,d=m();return g(d.onRemove(o))}),p(1," Eliminar "),i()}}function H(r,n){if(r&1){let e=C();a(0,"div",3)(1,"input",7),s("change",function(o){let d=u(e).$index,U=m();return g(U.onAdd(o,d))}),i(),S(2,Y,2,0,"button",8),i()}if(r&2){let e=n.$index,t=m();c(),l("value",t.playerNames()[e]),c(),O(t.playerNames().length>1?2:-1)}}var E=class r{playerNames=b.required();player=y();index=y();startGame=y();onAdd(n,e){let t=n.target.value;if(t==null||t==null)return;let o={index:e,name:t};this.player.emit(o)}onNewPlayer(){let n={name:""};this.player.emit(n)}onRemove(n){this.index.emit(n)}onStart(){this.startGame.emit(!0)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["player-setup"]],inputs:{playerNames:[1,"playerNames"]},outputs:{player:"player",index:"index",startGame:"startGame"},standalone:!0,features:[_],decls:12,vars:4,consts:[[1,"player","snow","row"],[1,"player-setup"],[1,"players-list"],[1,"player-input"],[1,"setup-buttons"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],["type","text","placeholder","Enter player name",1,"input",3,"change","value"],[1,"btn","btn-danger"],[1,"btn","btn-danger",3,"click"]],template:function(e,t){e&1&&(a(0,"section",0)(1,"div",1)(2,"h2"),p(3,"Configuraci\xF3n de jugadores"),i(),a(4,"div",2),v(5,H,3,2,"div",3,x),i(),a(7,"div",4)(8,"button",5),s("click",function(){return t.onNewPlayer()}),p(9," Agregar jugador "),i(),a(10,"button",6),s("click",function(){return t.onStart()}),p(11," Comenzar juego "),i()()()()),e&2&&(c(5),M(t.playerNames()),c(3),l("disabled",t.playerNames().length>=4),c(2),I(t.playerNames()[0].length==0?"disabled":""),l("disabled",t.playerNames()[0].length==0))},dependencies:[h],styles:[".player[_ngcontent-%COMP%]{height:80vh;width:100%;padding:2rem}.player-setup[_ngcontent-%COMP%]{padding:2rem;width:60%;margin:0 auto;background-color:#fff;border-radius:.8rem;box-shadow:0 .2rem .4rem #0000001a;z-index:10}.player-setup[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.4rem;margin-bottom:2rem;color:#c41e3a}.players-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:2rem}.player-input[_ngcontent-%COMP%]{display:flex;gap:1rem}.player-input[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{flex:1;padding:1rem;border:.1rem solid #ddd;border-radius:.4rem;font-size:1.6rem}.setup-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end}.disabled[_ngcontent-%COMP%]{filter:grayscale(60%)}"]})};var F=class r{card=b.required();cardClick=y();onCardClick(){!this.card().isMatched&&!this.card().isFlipped&&this.cardClick.emit(this.card())}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["shared-card"]],inputs:{card:[1,"card"]},outputs:{cardClick:"cardClick"},standalone:!0,features:[_],decls:7,vars:6,consts:[[1,"card",3,"click"],[1,"card-inner"],[1,"card-front","row"],[1,"card-back-content"],[1,"card-back","row"],[3,"src","alt"]],template:function(e,t){e&1&&(a(0,"div",0),s("click",function(){return t.onCardClick()}),a(1,"div",1)(2,"div",2)(3,"div",3),p(4,"?"),i()(),a(5,"div",4),k(6,"img",5),i()()()),e&2&&(w("flipped",t.card().isFlipped)("matched",t.card().isMatched),c(6),l("src",t.card().imageUrl,z)("alt",t.card().imageUrl))},styles:[".card[_ngcontent-%COMP%]{width:12rem;height:12rem;perspective:1000px;cursor:pointer;margin:1rem}.card.flipped[_ngcontent-%COMP%]   .card-inner[_ngcontent-%COMP%]{transform:rotateY(180deg)}.card.matched[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}.card[_ngcontent-%COMP%]   .card-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;transform-style:preserve-3d;transition:transform .6s}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;backface-visibility:hidden;background-color:#fff;border-radius:.8rem;box-shadow:0 .2rem .4rem #0000001a}.card[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]{transform:rotateY(180deg)}.card[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%;height:80%;object-fit:contain}.card[_ngcontent-%COMP%]   .card-back-content[_ngcontent-%COMP%]{font-size:3rem;color:#c41e3a}"]})};function K(r,n){if(r&1){let e=C();a(0,"shared-card",6),s("cardClick",function(o){u(e);let d=m();return g(d.onCardClick(o))}),i()}if(r&2){let e=n.$implicit;l("card",e)}}function L(r,n){if(r&1&&(a(0,"div",7),N(1,"async"),a(2,"span"),p(3),i()()),r&2){let e,t=n.$implicit,o=m();w("active",((e=G(1,4,o.gameService.currentPlayer$))==null?null:e.id)===t.id),c(3),j("",t.name,": ",t.score,"")}}var V=class r{gameStarted=b.required();gameService=P(T);ngOnDestroy(){this.gameService.resetGame()}onCardClick(n){this.gameStarted()&&this.gameService.flipCard(n)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["game-board"]],inputs:{gameStarted:[1,"gameStarted"]},standalone:!0,features:[_],decls:12,vars:4,consts:[[1,"game","snow"],[1,"game-board"],[1,"cards-grid"],[3,"card"],[1,"player-scores"],[1,"player-score",3,"active"],[3,"cardClick","card"],[1,"player-score"]],template:function(e,t){e&1&&(a(0,"section",0)(1,"div",1)(2,"div",2),v(3,K,1,1,"shared-card",3,x),N(5,"async"),i(),a(6,"div",4)(7,"h3"),p(8,"Scores"),i(),v(9,L,4,6,"div",5,x),N(11,"async"),i()()()),e&2&&(c(3),M(G(5,0,t.gameService.cards$)),c(6),M(G(11,2,t.gameService.players$)))},dependencies:[h,A,R,F],styles:[".game[_ngcontent-%COMP%]{height:80vh;width:100%;padding:2rem}.game-board[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 20rem;gap:2rem;margin-top:2rem;z-index:10}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(12rem,1fr));gap:1rem;justify-items:center}.player-scores[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:.8rem;box-shadow:0 .2rem .4rem #0000001a}.player-scores[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1.5rem;color:#c41e3a}.player-score[_ngcontent-%COMP%]{padding:1rem;margin-bottom:.5rem;border-radius:.4rem;font-size:1.6rem}.player-score.active[_ngcontent-%COMP%]{background-color:#c41e3a;color:#fff}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#bd2130}.btn-secondary[_ngcontent-%COMP%]{background-color:#165b33;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#0c321c}"]})};function Q(r,n){if(r&1&&k(0,"game-board",1),r&2){let e=m();l("gameStarted",e.gameStarted)}}function W(r,n){if(r&1){let e=C();a(0,"player-setup",3),s("player",function(o){u(e);let d=m();return g(d.addPlayer(o))})("index",function(o){u(e);let d=m();return g(d.removePlayer(o))})("startGame",function(o){u(e);let d=m();return g(d.startGame(o))}),i()}if(r&2){let e=m();l("playerNames",e.playerNames)}}var $=class r{playerNames=[""];gameStarted=!1;gameService=P(T);router=P(q);addPlayer(n){let e=n.index;e==null||e==null?this.newPlayer(n):this.editPlayer(n,e)}newPlayer(n){let e=n.name;this.playerNames.push(e)}editPlayer(n,e){this.playerNames[e]=n.name}removePlayer(n){this.playerNames=this.playerNames.filter((e,t)=>t!==n)}startGame(n=!1){if(!n)return;this.gameStarted=n;let e=this.playerNames.filter(t=>t.trim()!=="");e.length<1||this.gameService.initializeGame(e)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["pages-game"]],standalone:!0,features:[_],decls:3,vars:1,consts:[[1,"game-container"],[3,"gameStarted"],[3,"playerNames"],[3,"player","index","startGame","playerNames"]],template:function(e,t){e&1&&(a(0,"main",0),S(1,Q,1,1,"game-board",1)(2,W,1,1,"player-setup",2),i()),e&2&&(c(),O(t.gameStarted?1:2))},dependencies:[h,E,V],styles:[".game-container[_ngcontent-%COMP%]{max-width:120rem;margin:0 auto}"]})};export{$ as default};
